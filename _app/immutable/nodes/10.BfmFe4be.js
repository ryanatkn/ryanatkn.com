import{t as V,a as T,d as ke,e as Ee}from"../chunks/CNs3ZFP_.js";import{j as et,k as en,A as tn,aI as an,L as nn,K as sn,o as rn,a8 as on,x as cn,y as dn,b as Rt,aG as ln,e as un,u as aa,aJ as fn,aH as hn,p as ye,c as b,r as y,s as R,t as X,a as be,f as _e,B as f,aE as na,af as ka,a7 as A,aK as sa,a5 as It,ae as mn,h as Bt,aL as vn,a4 as Ta,a6 as pn}from"../chunks/vCeQm1GH.js";import{s as xe}from"../chunks/Cu9_prvA.js";import{p as U,i as B}from"../chunks/DinZ49NO.js";import{s as te}from"../chunks/YIgqUOox.js";import{o as Sa,j as Ia,d as _n}from"../chunks/efQGBZfq.js";import{s as Oe,C as Ca,S as Ft,d as gn,b as $,f as yn,a as Za,r as Aa,c as Xt}from"../chunks/D0g80fcT.js";import{e as Oa}from"../chunks/jSPH0HsW.js";import{t as me,s as ve}from"../chunks/DaXzFnxm.js";import{b as bn}from"../chunks/CfGRnaw3.js";import{h as Wt}from"../chunks/DvW6LCwv.js";import{a as je,n as ra,g as fa,b as wn,e as xn,m as ha,c as Tt,f as Ht,F as kn}from"../chunks/BaVJ5ckp.js";import{A as Tn}from"../chunks/CofEYzq8.js";import{c as Sn}from"../chunks/NK-_wpAp.js";import{b as In}from"../chunks/X_v8NoJ6.js";function Cn(a,e,t){et&&en();var n=a,s=on,r,i=an;tn(()=>{i(s,s=e())&&(r&&nn(r),r=sn(()=>t(n)))}),et&&(n=rn)}function Zn(a,e){et&&cn(dn(a)),Rt(()=>{var t=e();for(var n in t){var s=t[n];s?a.style.setProperty(n,s):a.style.removeProperty(n)}}),ln(()=>{a.remove()})}function An(a,e,t){un(()=>{var n=aa(()=>e(a,t==null?void 0:t())||{});if(t&&(n!=null&&n.update)){var s=!1,r={};Rt(()=>{var i=t();fn(i),s&&hn(r,i)&&(r=i,n.update(i))}),s=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function On(a,e,t=e){Sa(a,"input",n=>{var s=n?a.defaultValue:a.value;if(s=Yt(a)?qt(s):s,t(s),s!==(s=e())){var r=a.selectionStart,i=a.selectionEnd;a.value=s??"",i!==null&&(a.selectionStart=r,a.selectionEnd=Math.min(i,a.value.length))}}),(et&&a.defaultValue!==a.value||aa(e)==null&&a.value)&&t(Yt(a)?qt(a.value):a.value),Rt(()=>{var n=e();Yt(a)&&n===qt(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function En(a,e,t=e){Sa(a,"change",n=>{var s=n?a.defaultChecked:a.checked;t(s)}),(et&&a.defaultChecked!==a.checked||aa(e)==null)&&t(a.checked),Rt(()=>{var n=e();a.checked=!!n})}function Yt(a){var e=a.type;return e==="number"||e==="range"}function qt(a){return a===""?null:+a}const Nn=Sn();var O;(function(a){a.assertEqual=s=>s;function e(s){}a.assertIs=e;function t(s){throw new Error}a.assertNever=t,a.arrayToEnum=s=>{const r={};for(const i of s)r[i]=i;return r},a.getValidEnumValues=s=>{const r=a.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of r)i[o]=s[o];return a.objectValues(i)},a.objectValues=s=>a.objectKeys(s).map(function(r){return s[r]}),a.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const r=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&r.push(i);return r},a.find=(s,r)=>{for(const i of s)if(r(i))return i},a.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,r=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(r)}a.joinValues=n,a.jsonStringifyReplacer=(s,r)=>typeof r=="bigint"?r.toString():r})(O||(O={}));var Kt;(function(a){a.mergeShapes=(e,t)=>({...e,...t})})(Kt||(Kt={}));const m=O.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),pe=a=>{switch(typeof a){case"undefined":return m.undefined;case"string":return m.string;case"number":return isNaN(a)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":return Array.isArray(a)?m.array:a===null?m.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?m.promise:typeof Map<"u"&&a instanceof Map?m.map:typeof Set<"u"&&a instanceof Set?m.set:typeof Date<"u"&&a instanceof Date?m.date:m.object;default:return m.unknown}},u=O.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jn=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:");class Q extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},n={_errors:[]},s=r=>{for(const i of r.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let o=n,c=0;for(;c<i.path.length;){const d=i.path[c];c===i.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(t(i))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return s(this),n}static assert(e){if(!(e instanceof Q))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,O.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Q.create=a=>new Q(a);const Je=(a,e)=>{let t;switch(a.code){case u.invalid_type:a.received===m.undefined?t="Required":t=`Expected ${a.expected}, received ${a.received}`;break;case u.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(a.expected,O.jsonStringifyReplacer)}`;break;case u.unrecognized_keys:t=`Unrecognized key(s) in object: ${O.joinValues(a.keys,", ")}`;break;case u.invalid_union:t="Invalid input";break;case u.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${O.joinValues(a.options)}`;break;case u.invalid_enum_value:t=`Invalid enum value. Expected ${O.joinValues(a.options)}, received '${a.received}'`;break;case u.invalid_arguments:t="Invalid function arguments";break;case u.invalid_return_type:t="Invalid function return type";break;case u.invalid_date:t="Invalid date";break;case u.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(t=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?t=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?t=`Invalid input: must end with "${a.validation.endsWith}"`:O.assertNever(a.validation):a.validation!=="regex"?t=`Invalid ${a.validation}`:t="Invalid";break;case u.too_small:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:t="Invalid input";break;case u.too_big:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?t=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:t="Invalid input";break;case u.custom:t="Invalid input";break;case u.invalid_intersection_types:t="Intersection results could not be merged";break;case u.not_multiple_of:t=`Number must be a multiple of ${a.multipleOf}`;break;case u.not_finite:t="Number must be finite";break;default:t=e.defaultError,O.assertNever(a)}return{message:t}};let Ea=Je;function Rn(a){Ea=a}function Ct(){return Ea}const Zt=a=>{const{data:e,path:t,errorMaps:n,issueData:s}=a,r=[...t,...s.path||[]],i={...s,path:r};if(s.message!==void 0)return{...s,path:r,message:s.message};let o="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)o=d(i,{data:e,defaultError:o}).message;return{...s,path:r,message:o}},Mn=[];function h(a,e){const t=Ct(),n=Zt({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,t,t===Je?void 0:Je].filter(s=>!!s)});a.common.issues.push(n)}class J{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return x;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t){const r=await s.key,i=await s.value;n.push({key:r,value:i})}return J.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:r,value:i}=s;if(r.status==="aborted"||i.status==="aborted")return x;r.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(n[r.value]=i.value)}return{status:e.value,value:n}}}const x=Object.freeze({status:"aborted"}),Ye=a=>({status:"dirty",value:a}),G=a=>({status:"valid",value:a}),Qt=a=>a.status==="aborted",$t=a=>a.status==="dirty",Re=a=>a.status==="valid",tt=a=>typeof Promise<"u"&&a instanceof Promise;function At(a,e,t,n){if(typeof e=="function"?a!==e||!0:!e.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(a)}function Na(a,e,t,n,s){if(typeof e=="function"?a!==e||!0:!e.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(a,t),t}var _;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_||(_={}));var Qe,$e;class ce{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ma=(a,e)=>{if(Re(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Q(a.common.issues);return this._error=t,this._error}}};function k(a){if(!a)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=a;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,o)=>{var c,d;const{message:l}=a;return i.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:(c=l??n)!==null&&c!==void 0?c:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(d=l??t)!==null&&d!==void 0?d:o.defaultError}},description:s}}class S{get description(){return this._def.description}_getType(e){return pe(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:pe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new J,ctx:{common:e.parent.common,data:e.data,parsedType:pe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(tt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pe(e)},r=this._parseSync({data:e,path:s.path,parent:s});return ma(s,r)}"~validate"(e){var t,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pe(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:s});return Re(r)?{value:r.value}:{issues:s.common.issues}}catch(r){!((n=(t=r==null?void 0:r.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(r=>Re(r)?{value:r.value}:{issues:s.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pe(e)},s=this._parse({data:e,path:n.path,parent:n}),r=await(tt(s)?s:Promise.resolve(s));return ma(n,r)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,r)=>{const i=e(s),o=()=>r.addIssue({code:u.custom,...n(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new se({schema:this,typeName:w.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return oe.create(this,this._def)}nullable(){return Ce.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ne.create(this)}promise(){return Xe.create(this,this._def)}or(e){return rt.create([this,e],this._def)}and(e){return it.create(this,e,this._def)}transform(e){return new se({...k(this._def),schema:this,typeName:w.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ut({...k(this._def),innerType:this,defaultValue:t,typeName:w.ZodDefault})}brand(){return new ia({typeName:w.ZodBranded,type:this,...k(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ft({...k(this._def),innerType:this,catchValue:t,typeName:w.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return mt.create(this,e)}readonly(){return ht.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Dn=/^c[^\s-]{8,}$/i,Pn=/^[0-9a-z]+$/,zn=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Vn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ln=/^[a-z0-9_-]{21}$/i,Un=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Bn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Fn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Wn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Jt;const Hn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Yn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Jn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xn=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ja="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Kn=new RegExp(`^${ja}$`);function Ra(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);const t=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Qn(a){return new RegExp(`^${Ra(a)}$`)}function Ma(a){let e=`${ja}T${Ra(a)}`;const t=[];return t.push(a.local?"Z?":"Z"),a.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function $n(a,e){return!!((e==="v4"||!e)&&Hn.test(a)||(e==="v6"||!e)&&qn.test(a))}function es(a,e){if(!Un.test(a))return!1;try{const[t]=a.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function ts(a,e){return!!((e==="v4"||!e)&&Yn.test(a)||(e==="v6"||!e)&&Jn.test(a))}class ae extends S{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==m.string){const r=this._getOrReturnCtx(e);return h(r,{code:u.invalid_type,expected:m.string,received:r.parsedType}),x}const n=new J;let s;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:u.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="max")e.data.length>r.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:u.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="length"){const i=e.data.length>r.value,o=e.data.length<r.value;(i||o)&&(s=this._getOrReturnCtx(e,s),i?h(s,{code:u.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):o&&h(s,{code:u.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),n.dirty())}else if(r.kind==="email")Fn.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"email",code:u.invalid_string,message:r.message}),n.dirty());else if(r.kind==="emoji")Jt||(Jt=new RegExp(Wn,"u")),Jt.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"emoji",code:u.invalid_string,message:r.message}),n.dirty());else if(r.kind==="uuid")Vn.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"uuid",code:u.invalid_string,message:r.message}),n.dirty());else if(r.kind==="nanoid")Ln.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"nanoid",code:u.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid")Dn.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"cuid",code:u.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid2")Pn.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"cuid2",code:u.invalid_string,message:r.message}),n.dirty());else if(r.kind==="ulid")zn.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"ulid",code:u.invalid_string,message:r.message}),n.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),h(s,{validation:"url",code:u.invalid_string,message:r.message}),n.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"regex",code:u.invalid_string,message:r.message}),n.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(s=this._getOrReturnCtx(e,s),h(s,{code:u.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),n.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(s=this._getOrReturnCtx(e,s),h(s,{code:u.invalid_string,validation:{startsWith:r.value},message:r.message}),n.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(s=this._getOrReturnCtx(e,s),h(s,{code:u.invalid_string,validation:{endsWith:r.value},message:r.message}),n.dirty()):r.kind==="datetime"?Ma(r).test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{code:u.invalid_string,validation:"datetime",message:r.message}),n.dirty()):r.kind==="date"?Kn.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{code:u.invalid_string,validation:"date",message:r.message}),n.dirty()):r.kind==="time"?Qn(r).test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{code:u.invalid_string,validation:"time",message:r.message}),n.dirty()):r.kind==="duration"?Bn.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"duration",code:u.invalid_string,message:r.message}),n.dirty()):r.kind==="ip"?$n(e.data,r.version)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"ip",code:u.invalid_string,message:r.message}),n.dirty()):r.kind==="jwt"?es(e.data,r.alg)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"jwt",code:u.invalid_string,message:r.message}),n.dirty()):r.kind==="cidr"?ts(e.data,r.version)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"cidr",code:u.invalid_string,message:r.message}),n.dirty()):r.kind==="base64"?Gn.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"base64",code:u.invalid_string,message:r.message}),n.dirty()):r.kind==="base64url"?Xn.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"base64url",code:u.invalid_string,message:r.message}),n.dirty()):O.assertNever(r);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:u.invalid_string,..._.errToObj(n)})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,..._.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,..._.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,..._.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,..._.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,..._.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,..._.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,..._.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,..._.errToObj(t)})}nonempty(e){return this.min(1,_.errToObj(e))}trim(){return new ae({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ae.create=a=>{var e;return new ae({checks:[],typeName:w.ZodString,coerce:(e=a==null?void 0:a.coerce)!==null&&e!==void 0?e:!1,...k(a)})};function as(a,e){const t=(a.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,r=parseInt(a.toFixed(s).replace(".","")),i=parseInt(e.toFixed(s).replace(".",""));return r%i/Math.pow(10,s)}class Te extends S{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==m.number){const r=this._getOrReturnCtx(e);return h(r,{code:u.invalid_type,expected:m.number,received:r.parsedType}),x}let n;const s=new J;for(const r of this._def.checks)r.kind==="int"?O.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:u.invalid_type,expected:"integer",received:"float",message:r.message}),s.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),h(n,{code:u.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),h(n,{code:u.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="multipleOf"?as(e.data,r.value)!==0&&(n=this._getOrReturnCtx(e,n),h(n,{code:u.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:u.not_finite,message:r.message}),s.dirty()):O.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,_.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_.toString(t))}setLimit(e,t,n,s){return new Te({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:_.toString(s)}]})}_addCheck(e){return new Te({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:_.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&O.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Te.create=a=>new Te({checks:[],typeName:w.ZodNumber,coerce:(a==null?void 0:a.coerce)||!1,...k(a)});class Se extends S{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==m.bigint)return this._getInvalidInput(e);let n;const s=new J;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),h(n,{code:u.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),h(n,{code:u.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),h(n,{code:u.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):O.assertNever(r);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return h(t,{code:u.invalid_type,expected:m.bigint,received:t.parsedType}),x}gte(e,t){return this.setLimit("min",e,!0,_.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_.toString(t))}setLimit(e,t,n,s){return new Se({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:_.toString(s)}]})}_addCheck(e){return new Se({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Se.create=a=>{var e;return new Se({checks:[],typeName:w.ZodBigInt,coerce:(e=a==null?void 0:a.coerce)!==null&&e!==void 0?e:!1,...k(a)})};class at extends S{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==m.boolean){const n=this._getOrReturnCtx(e);return h(n,{code:u.invalid_type,expected:m.boolean,received:n.parsedType}),x}return G(e.data)}}at.create=a=>new at({typeName:w.ZodBoolean,coerce:(a==null?void 0:a.coerce)||!1,...k(a)});class Me extends S{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==m.date){const r=this._getOrReturnCtx(e);return h(r,{code:u.invalid_type,expected:m.date,received:r.parsedType}),x}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return h(r,{code:u.invalid_date}),x}const n=new J;let s;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:u.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:u.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):O.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Me({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:_.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:_.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Me.create=a=>new Me({checks:[],coerce:(a==null?void 0:a.coerce)||!1,typeName:w.ZodDate,...k(a)});class Ot extends S{_parse(e){if(this._getType(e)!==m.symbol){const n=this._getOrReturnCtx(e);return h(n,{code:u.invalid_type,expected:m.symbol,received:n.parsedType}),x}return G(e.data)}}Ot.create=a=>new Ot({typeName:w.ZodSymbol,...k(a)});class nt extends S{_parse(e){if(this._getType(e)!==m.undefined){const n=this._getOrReturnCtx(e);return h(n,{code:u.invalid_type,expected:m.undefined,received:n.parsedType}),x}return G(e.data)}}nt.create=a=>new nt({typeName:w.ZodUndefined,...k(a)});class st extends S{_parse(e){if(this._getType(e)!==m.null){const n=this._getOrReturnCtx(e);return h(n,{code:u.invalid_type,expected:m.null,received:n.parsedType}),x}return G(e.data)}}st.create=a=>new st({typeName:w.ZodNull,...k(a)});class Ge extends S{constructor(){super(...arguments),this._any=!0}_parse(e){return G(e.data)}}Ge.create=a=>new Ge({typeName:w.ZodAny,...k(a)});class Ne extends S{constructor(){super(...arguments),this._unknown=!0}_parse(e){return G(e.data)}}Ne.create=a=>new Ne({typeName:w.ZodUnknown,...k(a)});class ge extends S{_parse(e){const t=this._getOrReturnCtx(e);return h(t,{code:u.invalid_type,expected:m.never,received:t.parsedType}),x}}ge.create=a=>new ge({typeName:w.ZodNever,...k(a)});class Et extends S{_parse(e){if(this._getType(e)!==m.undefined){const n=this._getOrReturnCtx(e);return h(n,{code:u.invalid_type,expected:m.void,received:n.parsedType}),x}return G(e.data)}}Et.create=a=>new Et({typeName:w.ZodVoid,...k(a)});class ne extends S{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==m.array)return h(t,{code:u.invalid_type,expected:m.array,received:t.parsedType}),x;if(s.exactLength!==null){const i=t.data.length>s.exactLength.value,o=t.data.length<s.exactLength.value;(i||o)&&(h(t,{code:i?u.too_big:u.too_small,minimum:o?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(h(t,{code:u.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(h(t,{code:u.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>s.type._parseAsync(new ce(t,i,t.path,o)))).then(i=>J.mergeArray(n,i));const r=[...t.data].map((i,o)=>s.type._parseSync(new ce(t,i,t.path,o)));return J.mergeArray(n,r)}get element(){return this._def.type}min(e,t){return new ne({...this._def,minLength:{value:e,message:_.toString(t)}})}max(e,t){return new ne({...this._def,maxLength:{value:e,message:_.toString(t)}})}length(e,t){return new ne({...this._def,exactLength:{value:e,message:_.toString(t)}})}nonempty(e){return this.min(1,e)}}ne.create=(a,e)=>new ne({type:a,minLength:null,maxLength:null,exactLength:null,typeName:w.ZodArray,...k(e)});function He(a){if(a instanceof L){const e={};for(const t in a.shape){const n=a.shape[t];e[t]=oe.create(He(n))}return new L({...a._def,shape:()=>e})}else return a instanceof ne?new ne({...a._def,type:He(a.element)}):a instanceof oe?oe.create(He(a.unwrap())):a instanceof Ce?Ce.create(He(a.unwrap())):a instanceof de?de.create(a.items.map(e=>He(e))):a}class L extends S{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=O.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==m.object){const d=this._getOrReturnCtx(e);return h(d,{code:u.invalid_type,expected:m.object,received:d.parsedType}),x}const{status:n,ctx:s}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof ge&&this._def.unknownKeys==="strip"))for(const d in s.data)i.includes(d)||o.push(d);const c=[];for(const d of i){const l=r[d],v=s.data[d];c.push({key:{status:"valid",value:d},value:l._parse(new ce(s,v,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof ge){const d=this._def.unknownKeys;if(d==="passthrough")for(const l of o)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(d==="strict")o.length>0&&(h(s,{code:u.unrecognized_keys,keys:o}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const l of o){const v=s.data[l];c.push({key:{status:"valid",value:l},value:d._parse(new ce(s,v,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const l of c){const v=await l.key,g=await l.value;d.push({key:v,value:g,alwaysSet:l.alwaysSet})}return d}).then(d=>J.mergeObjectSync(n,d)):J.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return _.errToObj,new L({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,r,i,o;const c=(i=(r=(s=this._def).errorMap)===null||r===void 0?void 0:r.call(s,t,n).message)!==null&&i!==void 0?i:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=_.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new L({...this._def,unknownKeys:"strip"})}passthrough(){return new L({...this._def,unknownKeys:"passthrough"})}extend(e){return new L({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new L({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:w.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new L({...this._def,catchall:e})}pick(e){const t={};return O.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new L({...this._def,shape:()=>t})}omit(e){const t={};return O.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new L({...this._def,shape:()=>t})}deepPartial(){return He(this)}partial(e){const t={};return O.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new L({...this._def,shape:()=>t})}required(e){const t={};return O.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let r=this.shape[n];for(;r instanceof oe;)r=r._def.innerType;t[n]=r}}),new L({...this._def,shape:()=>t})}keyof(){return Da(O.objectKeys(this.shape))}}L.create=(a,e)=>new L({shape:()=>a,unknownKeys:"strip",catchall:ge.create(),typeName:w.ZodObject,...k(e)});L.strictCreate=(a,e)=>new L({shape:()=>a,unknownKeys:"strict",catchall:ge.create(),typeName:w.ZodObject,...k(e)});L.lazycreate=(a,e)=>new L({shape:a,unknownKeys:"strip",catchall:ge.create(),typeName:w.ZodObject,...k(e)});class rt extends S{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(r){for(const o of r)if(o.result.status==="valid")return o.result;for(const o of r)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=r.map(o=>new Q(o.ctx.common.issues));return h(t,{code:u.invalid_union,unionErrors:i}),x}if(t.common.async)return Promise.all(n.map(async r=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(s);{let r;const i=[];for(const c of n){const d={...t,common:{...t.common,issues:[]},parent:null},l=c._parseSync({data:t.data,path:t.path,parent:d});if(l.status==="valid")return l;l.status==="dirty"&&!r&&(r={result:l,ctx:d}),d.common.issues.length&&i.push(d.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const o=i.map(c=>new Q(c));return h(t,{code:u.invalid_union,unionErrors:o}),x}}get options(){return this._def.options}}rt.create=(a,e)=>new rt({options:a,typeName:w.ZodUnion,...k(e)});const he=a=>a instanceof ct?he(a.schema):a instanceof se?he(a.innerType()):a instanceof dt?[a.value]:a instanceof Ie?a.options:a instanceof lt?O.objectValues(a.enum):a instanceof ut?he(a._def.innerType):a instanceof nt?[void 0]:a instanceof st?[null]:a instanceof oe?[void 0,...he(a.unwrap())]:a instanceof Ce?[null,...he(a.unwrap())]:a instanceof ia||a instanceof ht?he(a.unwrap()):a instanceof ft?he(a._def.innerType):[];class Mt extends S{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.object)return h(t,{code:u.invalid_type,expected:m.object,received:t.parsedType}),x;const n=this.discriminator,s=t.data[n],r=this.optionsMap.get(s);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(h(t,{code:u.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),x)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const r of t){const i=he(r.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,r)}}return new Mt({typeName:w.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...k(n)})}}function ea(a,e){const t=pe(a),n=pe(e);if(a===e)return{valid:!0,data:a};if(t===m.object&&n===m.object){const s=O.objectKeys(e),r=O.objectKeys(a).filter(o=>s.indexOf(o)!==-1),i={...a,...e};for(const o of r){const c=ea(a[o],e[o]);if(!c.valid)return{valid:!1};i[o]=c.data}return{valid:!0,data:i}}else if(t===m.array&&n===m.array){if(a.length!==e.length)return{valid:!1};const s=[];for(let r=0;r<a.length;r++){const i=a[r],o=e[r],c=ea(i,o);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return t===m.date&&n===m.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}class it extends S{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(r,i)=>{if(Qt(r)||Qt(i))return x;const o=ea(r.value,i.value);return o.valid?(($t(r)||$t(i))&&t.dirty(),{status:t.value,value:o.data}):(h(n,{code:u.invalid_intersection_types}),x)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([r,i])=>s(r,i)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}it.create=(a,e,t)=>new it({left:a,right:e,typeName:w.ZodIntersection,...k(t)});class de extends S{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.array)return h(n,{code:u.invalid_type,expected:m.array,received:n.parsedType}),x;if(n.data.length<this._def.items.length)return h(n,{code:u.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x;!this._def.rest&&n.data.length>this._def.items.length&&(h(n,{code:u.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((i,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new ce(n,i,n.path,o)):null}).filter(i=>!!i);return n.common.async?Promise.all(r).then(i=>J.mergeArray(t,i)):J.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new de({...this._def,rest:e})}}de.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new de({items:a,typeName:w.ZodTuple,rest:null,...k(e)})};class ot extends S{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.object)return h(n,{code:u.invalid_type,expected:m.object,received:n.parsedType}),x;const s=[],r=this._def.keyType,i=this._def.valueType;for(const o in n.data)s.push({key:r._parse(new ce(n,o,n.path,o)),value:i._parse(new ce(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?J.mergeObjectAsync(t,s):J.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof S?new ot({keyType:e,valueType:t,typeName:w.ZodRecord,...k(n)}):new ot({keyType:ae.create(),valueType:e,typeName:w.ZodRecord,...k(t)})}}class Nt extends S{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.map)return h(n,{code:u.invalid_type,expected:m.map,received:n.parsedType}),x;const s=this._def.keyType,r=this._def.valueType,i=[...n.data.entries()].map(([o,c],d)=>({key:s._parse(new ce(n,o,n.path,[d,"key"])),value:r._parse(new ce(n,c,n.path,[d,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of i){const d=await c.key,l=await c.value;if(d.status==="aborted"||l.status==="aborted")return x;(d.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(d.value,l.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of i){const d=c.key,l=c.value;if(d.status==="aborted"||l.status==="aborted")return x;(d.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(d.value,l.value)}return{status:t.value,value:o}}}}Nt.create=(a,e,t)=>new Nt({valueType:e,keyType:a,typeName:w.ZodMap,...k(t)});class De extends S{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.set)return h(n,{code:u.invalid_type,expected:m.set,received:n.parsedType}),x;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(h(n,{code:u.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(h(n,{code:u.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const r=this._def.valueType;function i(c){const d=new Set;for(const l of c){if(l.status==="aborted")return x;l.status==="dirty"&&t.dirty(),d.add(l.value)}return{status:t.value,value:d}}const o=[...n.data.values()].map((c,d)=>r._parse(new ce(n,c,n.path,d)));return n.common.async?Promise.all(o).then(c=>i(c)):i(o)}min(e,t){return new De({...this._def,minSize:{value:e,message:_.toString(t)}})}max(e,t){return new De({...this._def,maxSize:{value:e,message:_.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}De.create=(a,e)=>new De({valueType:a,minSize:null,maxSize:null,typeName:w.ZodSet,...k(e)});class qe extends S{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.function)return h(t,{code:u.invalid_type,expected:m.function,received:t.parsedType}),x;function n(o,c){return Zt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ct(),Je].filter(d=>!!d),issueData:{code:u.invalid_arguments,argumentsError:c}})}function s(o,c){return Zt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ct(),Je].filter(d=>!!d),issueData:{code:u.invalid_return_type,returnTypeError:c}})}const r={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof Xe){const o=this;return G(async function(...c){const d=new Q([]),l=await o._def.args.parseAsync(c,r).catch(p=>{throw d.addIssue(n(c,p)),d}),v=await Reflect.apply(i,this,l);return await o._def.returns._def.type.parseAsync(v,r).catch(p=>{throw d.addIssue(s(v,p)),d})})}else{const o=this;return G(function(...c){const d=o._def.args.safeParse(c,r);if(!d.success)throw new Q([n(c,d.error)]);const l=Reflect.apply(i,this,d.data),v=o._def.returns.safeParse(l,r);if(!v.success)throw new Q([s(l,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new qe({...this._def,args:de.create(e).rest(Ne.create())})}returns(e){return new qe({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new qe({args:e||de.create([]).rest(Ne.create()),returns:t||Ne.create(),typeName:w.ZodFunction,...k(n)})}}class ct extends S{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ct.create=(a,e)=>new ct({getter:a,typeName:w.ZodLazy,...k(e)});class dt extends S{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return h(t,{received:t.data,code:u.invalid_literal,expected:this._def.value}),x}return{status:"valid",value:e.data}}get value(){return this._def.value}}dt.create=(a,e)=>new dt({value:a,typeName:w.ZodLiteral,...k(e)});function Da(a,e){return new Ie({values:a,typeName:w.ZodEnum,...k(e)})}class Ie extends S{constructor(){super(...arguments),Qe.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return h(t,{expected:O.joinValues(n),received:t.parsedType,code:u.invalid_type}),x}if(At(this,Qe)||Na(this,Qe,new Set(this._def.values)),!At(this,Qe).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return h(t,{received:t.data,code:u.invalid_enum_value,options:n}),x}return G(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ie.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ie.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Qe=new WeakMap;Ie.create=Da;class lt extends S{constructor(){super(...arguments),$e.set(this,void 0)}_parse(e){const t=O.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==m.string&&n.parsedType!==m.number){const s=O.objectValues(t);return h(n,{expected:O.joinValues(s),received:n.parsedType,code:u.invalid_type}),x}if(At(this,$e)||Na(this,$e,new Set(O.getValidEnumValues(this._def.values))),!At(this,$e).has(e.data)){const s=O.objectValues(t);return h(n,{received:n.data,code:u.invalid_enum_value,options:s}),x}return G(e.data)}get enum(){return this._def.values}}$e=new WeakMap;lt.create=(a,e)=>new lt({values:a,typeName:w.ZodNativeEnum,...k(e)});class Xe extends S{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.promise&&t.common.async===!1)return h(t,{code:u.invalid_type,expected:m.promise,received:t.parsedType}),x;const n=t.parsedType===m.promise?t.data:Promise.resolve(t.data);return G(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Xe.create=(a,e)=>new Xe({type:a,typeName:w.ZodPromise,...k(e)});class se extends S{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===w.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,r={addIssue:i=>{h(n,i),i.fatal?t.abort():t.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),s.type==="preprocess"){const i=s.transform(n.data,r);if(n.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return x;const c=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return c.status==="aborted"?x:c.status==="dirty"||t.value==="dirty"?Ye(c.value):c});{if(t.value==="aborted")return x;const o=this._def.schema._parseSync({data:i,path:n.path,parent:n});return o.status==="aborted"?x:o.status==="dirty"||t.value==="dirty"?Ye(o.value):o}}if(s.type==="refinement"){const i=o=>{const c=s.refinement(o,r);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?x:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?x:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Re(i))return i;const o=s.transform(i.value,r);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>Re(i)?Promise.resolve(s.transform(i.value,r)).then(o=>({status:t.value,value:o})):i);O.assertNever(s)}}se.create=(a,e,t)=>new se({schema:a,typeName:w.ZodEffects,effect:e,...k(t)});se.createWithPreprocess=(a,e,t)=>new se({schema:e,effect:{type:"preprocess",transform:a},typeName:w.ZodEffects,...k(t)});class oe extends S{_parse(e){return this._getType(e)===m.undefined?G(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oe.create=(a,e)=>new oe({innerType:a,typeName:w.ZodOptional,...k(e)});class Ce extends S{_parse(e){return this._getType(e)===m.null?G(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ce.create=(a,e)=>new Ce({innerType:a,typeName:w.ZodNullable,...k(e)});class ut extends S{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===m.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ut.create=(a,e)=>new ut({innerType:a,typeName:w.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...k(e)});class ft extends S{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return tt(s)?s.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Q(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Q(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ft.create=(a,e)=>new ft({innerType:a,typeName:w.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...k(e)});class jt extends S{_parse(e){if(this._getType(e)!==m.nan){const n=this._getOrReturnCtx(e);return h(n,{code:u.invalid_type,expected:m.nan,received:n.parsedType}),x}return{status:"valid",value:e.data}}}jt.create=a=>new jt({typeName:w.ZodNaN,...k(a)});const ns=Symbol("zod_brand");class ia extends S{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class mt extends S{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?x:r.status==="dirty"?(t.dirty(),Ye(r.value)):this._def.out._parseAsync({data:r.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?x:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new mt({in:e,out:t,typeName:w.ZodPipeline})}}class ht extends S{_parse(e){const t=this._def.innerType._parse(e),n=s=>(Re(s)&&(s.value=Object.freeze(s.value)),s);return tt(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}}ht.create=(a,e)=>new ht({innerType:a,typeName:w.ZodReadonly,...k(e)});function va(a,e){const t=typeof a=="function"?a(e):typeof a=="string"?{message:a}:a;return typeof t=="string"?{message:t}:t}function Pa(a,e={},t){return a?Ge.create().superRefine((n,s)=>{var r,i;const o=a(n);if(o instanceof Promise)return o.then(c=>{var d,l;if(!c){const v=va(e,n),g=(l=(d=v.fatal)!==null&&d!==void 0?d:t)!==null&&l!==void 0?l:!0;s.addIssue({code:"custom",...v,fatal:g})}});if(!o){const c=va(e,n),d=(i=(r=c.fatal)!==null&&r!==void 0?r:t)!==null&&i!==void 0?i:!0;s.addIssue({code:"custom",...c,fatal:d})}}):Ge.create()}const ss={object:L.lazycreate};var w;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(w||(w={}));const rs=(a,e={message:`Input not instance of ${a.name}`})=>Pa(t=>t instanceof a,e),za=ae.create,Va=Te.create,is=jt.create,os=Se.create,La=at.create,cs=Me.create,ds=Ot.create,ls=nt.create,us=st.create,fs=Ge.create,hs=Ne.create,ms=ge.create,vs=Et.create,ps=ne.create,_s=L.create,gs=L.strictCreate,ys=rt.create,bs=Mt.create,ws=it.create,xs=de.create,ks=ot.create,Ts=Nt.create,Ss=De.create,Is=qe.create,Cs=ct.create,Zs=dt.create,As=Ie.create,Os=lt.create,Es=Xe.create,pa=se.create,Ns=oe.create,js=Ce.create,Rs=se.createWithPreprocess,Ms=mt.create,Ds=()=>za().optional(),Ps=()=>Va().optional(),zs=()=>La().optional(),Vs={string:a=>ae.create({...a,coerce:!0}),number:a=>Te.create({...a,coerce:!0}),boolean:a=>at.create({...a,coerce:!0}),bigint:a=>Se.create({...a,coerce:!0}),date:a=>Me.create({...a,coerce:!0})},Ls=x;var we=Object.freeze({__proto__:null,defaultErrorMap:Je,setErrorMap:Rn,getErrorMap:Ct,makeIssue:Zt,EMPTY_PATH:Mn,addIssueToContext:h,ParseStatus:J,INVALID:x,DIRTY:Ye,OK:G,isAborted:Qt,isDirty:$t,isValid:Re,isAsync:tt,get util(){return O},get objectUtil(){return Kt},ZodParsedType:m,getParsedType:pe,ZodType:S,datetimeRegex:Ma,ZodString:ae,ZodNumber:Te,ZodBigInt:Se,ZodBoolean:at,ZodDate:Me,ZodSymbol:Ot,ZodUndefined:nt,ZodNull:st,ZodAny:Ge,ZodUnknown:Ne,ZodNever:ge,ZodVoid:Et,ZodArray:ne,ZodObject:L,ZodUnion:rt,ZodDiscriminatedUnion:Mt,ZodIntersection:it,ZodTuple:de,ZodRecord:ot,ZodMap:Nt,ZodSet:De,ZodFunction:qe,ZodLazy:ct,ZodLiteral:dt,ZodEnum:Ie,ZodNativeEnum:lt,ZodPromise:Xe,ZodEffects:se,ZodTransformer:se,ZodOptional:oe,ZodNullable:Ce,ZodDefault:ut,ZodCatch:ft,ZodNaN:jt,BRAND:ns,ZodBranded:ia,ZodPipeline:mt,ZodReadonly:ht,custom:Pa,Schema:S,ZodSchema:S,late:ss,get ZodFirstPartyTypeKind(){return w},coerce:Vs,any:fs,array:ps,bigint:os,boolean:La,date:cs,discriminatedUnion:bs,effect:pa,enum:As,function:Is,instanceof:rs,intersection:ws,lazy:Cs,literal:Zs,map:Ts,nan:is,nativeEnum:Os,never:ms,null:us,nullable:js,number:Va,object:_s,oboolean:zs,onumber:Ps,optional:Ns,ostring:Ds,pipeline:Ms,preprocess:Rs,promise:Es,record:ks,set:Ss,strictObject:gs,string:za,symbol:ds,transformer:pa,tuple:xs,undefined:ls,union:ys,unknown:hs,void:vs,NEVER:Ls,ZodIssueCode:u,quotelessJson:jn,ZodError:Q});const Us=a=>a?a.constructor===Object||a.constructor===void 0:!1,Bs=Object.freeze({}),Ua=a=>!a||!Us(a)?a:Object.fromEntries(Object.entries(a).sort((e,t)=>e[0]>t[0]?1:-1).map(([e,t])=>[e,Ua(t)])),_a="application/vnd.github+json",Fs="2022-11-28",oa=async(a,e)=>{const{request:t,params:n,parse:s,token:r,cache:i,return_early_from_cache:o,log:c,fetch:d=globalThis.fetch}=e??Bs,l=typeof a=="string"?new URL(a):a,v=l.href,g=(t==null?void 0:t.method)??(n?"POST":"GET");let p,N;if(i&&(N=qs(v,n,g),p=i.get(N),o&&p))return c==null||c.info("[fetch_value] cached locally and returning early",v),c==null||c.debug("[fetch_value] cached value",p),{ok:!0,value:p.value,headers:ga(p)};const I=(t==null?void 0:t.body)??(g==="GET"||g==="HEAD"?null:JSON.stringify(n??{})),C=new Headers(t==null?void 0:t.headers);C.has("accept")||C.set("accept",l.hostname==="api.github.com"?_a:"application/json"),C.get("accept")===_a&&!C.has("x-github-api-version")&&C.set("x-github-api-version",Fs),I&&!C.has("content-type")&&C.set("content-type","application/json"),r&&!C.has("authorization")&&C.set("authorization","Bearer "+r);const F=p==null?void 0:p.etag;if(F&&!C.has("if-none-match"))C.set("if-none-match",F);else{const le=p==null?void 0:p.last_modified;le&&!C.has("if-modified-since")&&C.set("if-modified-since",le)}const K=new Request(l,{...t,headers:C,method:g,body:I});c==null||c.info("[fetch_value] fetching url with headers",a),c==null||c.debug("[fetch_value] fetching with headers",Ws(C));const P=await d(K);if(c==null||c.info("[fetch_value] fetched",a,P.status,Hs(P.headers)),c==null||c.debug("[fetch_value] fetched",Object.fromEntries(P.headers.entries())),P.status===429)throw Error("ratelimited exceeded fetching url "+a);if(P.status===304){if(!p)throw Error("unexpected 304 status without a cached value");return c==null||c.info("[fetch_value] cache hit",a),{ok:!0,value:p.value,headers:ga(p)}}if(!P.ok)return{ok:!1,status:P.status,message:P.statusText};const Z=P.headers.get("content-type"),M=await(!Z||Z.includes("json")?P.json():P.text()),D=s?s(M):M;if(c==null||c.debug("[fetch_value] fetched json",a,D),N){const le={key:N,url:v,params:n,value:D,etag:P.headers.get("etag"),last_modified:P.headers.get("etag")?null:P.headers.get("last-modified")};i.set(N,le)}return{ok:!0,value:D,headers:P.headers}},ga=a=>{const e=new Headers;return a.etag&&e.set("etag",a.etag),a.last_modified&&e.set("last-modified",a.last_modified),e},Ws=a=>{const e=Object.fromEntries(a.entries());return e.authorization&&(e.authorization="[REDACTED]"),e},Hs=a=>{const e=a.get("x-ratelimit-limit"),t=a.get("x-ratelimit-remaining");return e||t?`ratelimit ${t} of ${e}`:""},Ba=we.string(),Ys=we.object({key:Ba,url:we.string(),params:we.any(),value:we.any(),etag:we.string().nullable(),last_modified:we.string().nullable()});we.map(Ba,Ys);const ya="::",qs=(a,e,t)=>{let n=t+ya+a;return e!=null&&(n+=ya+JSON.stringify(Ua(e))),n};function St(a,e){const t=+je(a)-+je(e);return t<0?-1:t>0?1:t}function Js(a,e,t){const[n,s]=ra(t==null?void 0:t.in,a,e),r=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return r*12+i}function Gs(a){return e=>{const t=Math.trunc,n=t(e);return n===0?0:n}}function Xs(a,e){return+je(a)-+je(e)}function Ks(a,e){const t=je(a,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function Qs(a,e){const t=je(a,e==null?void 0:e.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function $s(a,e){const t=je(a,e==null?void 0:e.in);return+Ks(t,e)==+Qs(t,e)}function er(a,e,t){const[n,s,r]=ra(t==null?void 0:t.in,a,a,e),i=St(s,r),o=Math.abs(Js(s,r));if(o<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-i*o);let c=St(s,r)===-i;$s(n)&&o===1&&St(n,r)===1&&(c=!1);const d=i*(o-+c);return d===0?0:d}function tr(a,e,t){const n=Xs(a,e)/1e3;return Gs()(n)}function ba(a,e,t){const n=wn(),s=(t==null?void 0:t.locale)??n.locale??xn,r=2520,i=St(a,e);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:i}),[c,d]=ra(t==null?void 0:t.in,...i>0?[e,a]:[a,e]),l=tr(d,c),v=(fa(d)-fa(c))/1e3,g=Math.round((l-v)/60);let p;if(g<2)return g===0?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",g,o);if(g<45)return s.formatDistance("xMinutes",g,o);if(g<90)return s.formatDistance("aboutXHours",1,o);if(g<ha){const N=Math.round(g/60);return s.formatDistance("aboutXHours",N,o)}else{if(g<r)return s.formatDistance("xDays",1,o);if(g<Tt){const N=Math.round(g/ha);return s.formatDistance("xDays",N,o)}else if(g<Tt*2)return p=Math.round(g/Tt),s.formatDistance("aboutXMonths",p,o)}if(p=er(d,c),p<12){const N=Math.round(g/Tt);return s.formatDistance("xMonths",N,o)}else{const N=p%12,I=Math.trunc(p/12);return N<3?s.formatDistance("aboutXYears",I,o):N<9?s.formatDistance("overXYears",I,o):s.formatDistance("almostXYears",I+1,o)}}var ar=V("<span><span><!></span><span><!></span><span><!></span></span>");function nr(a,e){ye(e,!0);const t=U(e,"running",3,!0);var n=ar();let s;var r=b(n);let i;var o=b(r);{var c=Z=>{var M=ke(),D=_e(M);te(D,()=>e.children,()=>0),T(Z,M)},d=Z=>{var M=Ee("•");T(Z,M)};B(o,Z=>{e.children?Z(c):Z(d,!1)})}y(r);var l=R(r);let v;var g=b(l);{var p=Z=>{var M=ke(),D=_e(M);te(D,()=>e.children,()=>1),T(Z,M)},N=Z=>{var M=Ee("•");T(Z,M)};B(g,Z=>{e.children?Z(p):Z(N,!1)})}y(l);var I=R(l);let C;var F=b(I);{var K=Z=>{var M=ke(),D=_e(M);te(D,()=>e.children,()=>2),T(Z,M)},P=Z=>{var M=Ee("•");T(Z,M)};B(F,Z=>{e.children?Z(K):Z(P,!1)})}y(I),y(n),X(Z=>{var M;s=Oe(n,s,{...e.attrs,class:`pending_animation ${((M=e.attrs)==null?void 0:M.class)??""}`,[Ca]:Z},"svelte-18ylyg9"),i=Oe(r,i,{...e.item_attrs,[Ft]:{"animation-delay":"0s"}},"svelte-18ylyg9"),v=Oe(l,v,{...e.item_attrs,[Ft]:{"animation-delay":"0.09s"}},"svelte-18ylyg9"),C=Oe(I,C,{...e.item_attrs,[Ft]:{"animation-delay":"0.3s"}},"svelte-18ylyg9")},[()=>({running:t(),flex:!e.inline,display_inline_flex:e.inline,align_items_center:e.inline})]),T(a,n),be()}var sr=V('<span class="animation svelte-cvss5b"><!></span>'),rr=V('<button><span class="content svelte-cvss5b"><!></span> <!></button>');function ir(a,e){ye(e,!0);let t=na(void 0);const n=l=>{var v;return(v=f(t))==null?void 0:v.focus(l)};var s=rr();let r;var i=b(s),o=b(i);te(o,()=>e.children),y(i);var c=R(i,2);{var d=l=>{var v=sr(),g=b(v);{var p=I=>{var C=ke(),F=_e(C);te(F,()=>e.animation),T(I,C)},N=I=>{nr(I,{get running(){return e.running}})};B(g,I=>{e.animation?I(p):I(N,!1)})}y(v),T(l,v)};B(c,l=>{e.pending&&l(d)})}return y(s),bn(s,l=>ka(t,l),()=>f(t)),X(l=>{var v,g;return r=Oe(s,r,{type:"button",...e.attrs,disabled:e.disabled??((v=e.attrs)==null?void 0:v.disabled)??e.pending,title:e.title??((g=e.attrs)==null?void 0:g.title),onclick:e.onclick,[Ca]:l},"svelte-cvss5b")},[()=>({pending:e.pending})]),T(a,s),be({focus:n})}const Gt=(a,e)=>{let t,n,s,r,i,o,c,d;const l=p=>{d=p,o=0,typeof p=="function"?(t=p,n=void 0,s=void 0,r=void 0):p&&(t=p.onintersect,n=p.ondisconnect,s=p.count,r=p.options),v()},v=()=>{c&&g(),!(d===null||s===0)&&(c=new IntersectionObserver(p=>{i=p[0].isIntersecting,t&&c&&t({intersecting:i,intersections:o,el:a,observer:c,disconnect:g}),i?o++:s&&s>0&&o>=s&&g()},r),c.observe(a))},g=()=>{c&&(c.disconnect(),n&&n({intersecting:i,intersections:o,el:a,observer:c}),c=null)};return l(e),{update:p=>{l(p)},destroy:g}};var or=V('<div class="content panel p_md mb_lg svelte-1nc1gfs"><!></div>'),cr=V("<details><summary> </summary><!></details>"),dr=V('<div class="mastodon_status_item svelte-1nc1gfs"><header class="svelte-1nc1gfs"><button type="button" class="avatar plain icon_button svelte-1nc1gfs"><img class="icon svelte-1nc1gfs"></button> <div class="names svelte-1nc1gfs"><div class="name svelte-1nc1gfs"><a> </a></div> <small class="svelte-1nc1gfs"> </small> <small class="date svelte-1nc1gfs"><a class="svelte-1nc1gfs"> </a></small></div></header> <!> <div class="content svelte-1nc1gfs"><!></div></div>');function ta(a,e){ye(e,!0);const t=A(()=>e.item.created_at),n=A(()=>e.item.edited_at),s=A(()=>e.item.content),r=A(()=>e.item.account),i=A(()=>e.item.url),o=A(()=>e.item.sensitive),c=A(()=>e.item.spoiler_text),d=A(()=>f(r).created_at),l=A(()=>f(r).avatar_static),v=A(()=>f(r).url),g=A(()=>f(r).display_name),p=A(()=>f(r).followers_count),N=A(()=>f(r).following_count),I=A(()=>f(r).acct),C=A(()=>f(r).note),F=A(()=>Ht(new Date(f(d)),"PPpp")),K=A(()=>ba(new Date,new Date(f(t)))),P=A(()=>f(n)?Ht(new Date(f(n)),"PPpp"):null),Z=A(()=>f(n)?ba(new Date,new Date(f(n))):null),M=A(()=>Ht(new Date(f(d)),"MMM yyyy"));let D=na(!1);const le=()=>{ka(D,!f(D))};var ee=dr(),z=b(ee),Y=b(z);Y.__click=function(...q){var W;(W=f(C)?le:void 0)==null||W.apply(this,q)};var Ze=b(Y);y(Y);var Pe=R(Y,2),ze=b(Pe),Ve=b(ze),vt=b(Ve,!0);y(Ve),y(ze);var re=R(ze,2),pt=b(re,!0);y(re);var Ae=R(re,2),Le=b(Ae),Dt=b(Le);y(Le),y(Ae),y(Pe),y(z);var Ue=R(z,2);{var _t=q=>{var W=or(),ue=b(W);Wt(ue,()=>f(C)),y(W),me(3,W,()=>ve),T(q,W)};B(Ue,q=>{f(D)&&f(C)&&q(_t)})}var gt=R(Ue,2),Pt=b(gt);{var zt=q=>{var W=cr(),ue=b(W),yt=b(ue,!0);y(ue);var Be=R(ue);Wt(Be,()=>f(s)),y(W),X(()=>xe(yt,f(c)||"view sensitive content")),T(q,W)},Vt=q=>{var W=ke(),ue=_e(W);Wt(ue,()=>f(s)),T(q,W)};B(Pt,q=>{f(o)?q(zt):q(Vt,!1)})}y(gt),y(ee),X(q=>{$(Y,"title",f(C)?`${f(D)?"hide":"show"} ${f(I)}'s profile`:void 0),Y.disabled=!f(C),$(Y,"aria-label",f(C)?`${f(D)?"hide":"show"} ${f(I)}'s profile`:void 0),$(Ze,"src",f(l)),$(Ze,"alt",`avatar for ${f(I)??""}`),$(Ve,"href",f(v)),$(Ve,"title",q),xe(vt,f(g)),$(re,"title",`following ${f(N)??""}, ${f(p)??""} followers`),xe(pt,f(I)),$(Ae,"title",`posted ${f(F)??""}${f(P)?`, edited ${f(P)}`:""}, joined ${f(M)??""}`),$(Le,"href",f(i)),xe(Dt,`${f(K)??""} ago${f(Z)?`, edited ${f(Z)} ago`:""}`)},[()=>gn(f(v),"https://")]),T(a,ee),be()}Ia(["click"]);var lr=V('<li class="svelte-7gwsg1"><!> <!></li>'),ur=V('<ul class="mastodon_status_tree unstyled svelte-7gwsg1"></ul>');function Fa(a,e){ye(e,!0);const t=A(()=>e.item.id),n=A(()=>e.items.filter(o=>o.in_reply_to_id===f(t)));var s=ke(),r=_e(s);{var i=o=>{var c=ur();Oa(c,21,()=>f(n),d=>d.id,(d,l)=>{var v=lr(),g=b(v);ta(g,{get item(){return f(l)}});var p=R(g,2);Fa(p,{get item(){return f(l)},get items(){return e.items}}),y(v),T(d,v)}),y(c),T(o,c)};B(r,o=>{f(n).length&&o(i)})}T(a,s),be()}class fr extends Error{constructor(e,t=`Unreachable case: ${e}`){super(t)}}const hr=a=>Array.isArray(a)?a:[a],mr=(a,e)=>`https://${a}/api/v1/statuses/${e}`,vr=(a,e)=>`https://${a}/api/v1/statuses/${e}/context`,pr=(a,e)=>`https://${a}/api/v1/statuses/${e}/favourited_by`,Wa=a=>{try{const e=new URL(a),t=yn(e.pathname,"/context").split("/").filter(Boolean),n=t[0][0]==="@"?t[0].substring(1):null;if(!n)return null;const s=t.length>1?t[t.length-1]:null;return s?{href:a,host:e.host,author:n,status_id:s}:null}catch{return null}},_r=async(a,e,t,n,s,r,i)=>{const o=vr(a,e),c=await oa(o,{request:s,token:r,cache:t,return_early_from_cache:sa,log:n,fetch:i});return c.ok?c.value:null},gr=async(a,e,t,n,s,r,i)=>{const o=mr(a,e),c=await oa(o,{request:s,token:r,cache:t,return_early_from_cache:sa,log:n,fetch:i});return c.ok?c.value:null},yr=async(a,e,t,n,s,r,i)=>{const o=pr(a,e),c=await oa(o,{request:s,token:r,cache:t,return_early_from_cache:sa,log:n,fetch:i});return c.ok?c.value:null},br=async(a,e,t,n,s)=>{const r=t?hr(t):null,i=e.descendants;if(!i.length||!(r!=null&&r.length))return[];const o=new URL(a.url).host,c=new Set;for(const d of i)for(const l of r)if(l.type==="favourited_by"){if(!d.favourites_count)continue;const v=await yr(o,d.id,n,s);if(v==null?void 0:v.find(p=>l.favourited_by.includes(p.acct))){c.add(d.id);break}}else if(l.type==="minimum_favourites"){if(d.favourites_count>=l.minimum_favourites){c.add(d.id);break}}else if(l.type==="custom"){if(l.should_include(d,a,e)){c.add(d.id);break}}else throw new fr(l);return i.filter(d=>c.has(d.id)?d:null)};function wr(a,e){ye(e,!0);let t=U(e,"include_ancestors",3,!1),n=U(e,"include_replies",3,!1),s=U(e,"loading",15),r=U(e,"item",15),i=U(e,"status_context",15),o=U(e,"replies",15),c=U(e,"load_time",15);const d=A(()=>t()||n()),l=A(()=>e.reply_filter===void 0?n()?{type:"custom",should_include:()=>!0}:null:e.reply_filter),v=async()=>{if(!e.host||!e.id)return;const N=performance.now();s(!0),await(async I=>(r(I[0]),i(I[1])))(await Promise.all([gr(e.host,e.id,e.cache,e.log),f(d)?_r(e.host,e.id,e.cache,e.log):null])),r()&&i()?o(await br(r(),i(),typeof f(l)=="function"?f(l)(r(),i()):f(l),e.cache,e.log)):o(null),s(!1),c(performance.now()-N)};var g=ke(),p=_e(g);te(p,()=>e.children,()=>({item:r(),status_context:i(),replies:o(),load:v,loading:s(),load_time:c()})),T(a,g),be()}const wa=(a,e,t)=>{try{const n=localStorage.getItem(a);if(!n)return e();const s=JSON.parse(n);return t==null||t(s),s}catch{try{localStorage.removeItem(a)}catch{}return e()}},xa=(a,e)=>{try{e===void 0?localStorage.removeItem(a):localStorage.setItem(a,JSON.stringify(e))}catch{}};var xr=V("<div><!></div>"),kr=V('<fieldset><div><label title="where to load the toot" class="flex_1 row"><a class="icon_button box mr_lg">🔗</a> <input></label></div> <!></fieldset>');function Tr(a,e){ye(e,!0);let t=U(e,"url",15);const n=A(()=>Wa(t())),s=A(()=>!!(t()&&!f(n)));var r=kr(),i=b(r);let o;var c=b(i),d=b(c);Za(d,"",{},{"font-size":"var(--font_size_xl)"});var l=R(d,2);Aa(l);var v=I=>I.currentTarget.select();let g;y(c),y(i);var p=R(i,2);{var N=I=>{var C=xr(),F=b(C);Tn(F,{status:"error",children:(K,P)=>{It();var Z=Ee("invalid Mastodon status url");T(K,Z)},$$slots:{default:!0}}),y(C),me(3,C,()=>ve),T(I,C)};B(p,I=>{f(s)&&I(N)})}y(r),X(I=>{o=Xt(i,1,"row",null,o,I),$(d,"href",t()||void 0),g=Oe(l,g,{placeholder:"> toot url",onfocus:v,...e.attrs})},[()=>({mb_lg:f(s)})]),On(l,t),T(a,r),be()}const Sr=(a,e)=>{e(!e())};var Ir=V("<div></div>"),Cr=V('<div class="transition_wrapper svelte-esn2at"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Zr=V('<div class="icon_button_content svelte-esn2at"><div class="icon svelte-esn2at">🦣</div> <div class="button_content svelte-esn2at"><div>load toot<!> from</div> <code class="ellipsis"><!></code></div></div>'),Ar=V('<div class="transition_wrapper svelte-esn2at"><!></div>'),Or=V('<div class="pb_md"><a rel="noreferrer" class="display_block panel p_md"><span class="font_family_mono">↪︎</span> reply on Mastodon</a></div>'),Er=V('<div class="loaded_message svelte-esn2at"> </div>'),Nr=V(`<div class="settings controls panel svelte-esn2at"><form class="w_100"><div class="mb_lg"><!></div> <fieldset class="row"><label class="row"><input type="checkbox">automatically load when
										scrolled onscreen</label></fieldset></form> <!></div>`),jr=V('<div><div class="toot_content svelte-esn2at"><!> <div class="main_post panel svelte-esn2at"><div class="panel bg_panel svelte-esn2at"><!></div></div> <!></div> <!> <div class="toot_controls svelte-esn2at"><div class="controls svelte-esn2at"><div class="row"><button type="button">settings</button> <div class="reset svelte-esn2at"><button type="button">reset</button><!></div></div></div> <!></div></div>');function Rr(a,e){ye(e,!0);let t=U(e,"updated_url",31,()=>mn(e.url)),n=U(e,"include_ancestors",3,!1),s=U(e,"include_replies",3,!1),r=U(e,"loading",15),i=U(e,"load_time",15),o=U(e,"initial_show_settings",3,!1),c=U(e,"show_settings",15),d=U(e,"autoload_storage_key",3,"autoload"),l=U(e,"initial_autoload",3,!1),v=U(e,"autoload",23,()=>d()?wa(d(),()=>l()):l()),g=na(1);const p=()=>{var D;vn(g),t(e.url),r(void 0),i(void 0),(D=e.onreset)==null||D.call(e)},N=A(()=>e.settings_storage_key&&"show_settings"+e.settings_storage_key);Bt(()=>{c()===void 0&&c(f(N)?wa(f(N),()=>o()):o())}),Bt(()=>{f(N)&&xa(f(N),c())}),Bt(()=>{d()&&xa(d(),v())});const I=A(()=>Wa(t())),C=A(()=>{var D;return((D=f(I))==null?void 0:D.status_id)??null}),F=A(()=>{var D;return((D=f(I))==null?void 0:D.host)??null}),K=A(()=>r()!==!1&&!!f(F)),P=A(()=>r()!==void 0||t()!==e.url);var Z=ke(),M=_e(Z);return Cn(M,()=>f(g),D=>{wr(D,{get host(){return f(F)},get id(){return f(C)},get include_ancestors(){return n()},get include_replies(){return s()},get cache(){return e.cache},get log(){return e.log},get reply_filter(){return e.reply_filter},get loading(){return r()},set loading(ee){r(ee)},get load_time(){return i()},set load_time(ee){i(ee)},children:(ee,z)=>{let Y=()=>z==null?void 0:z().item,Ze=()=>z==null?void 0:z().status_context,Pe=()=>z==null?void 0:z().replies,ze=()=>z==null?void 0:z().load,Ve=()=>z==null?void 0:z().loading,vt=()=>z==null?void 0:z().load_time;var re=jr();let pt;var Ae=b(re),Le=b(Ae);{var Dt=j=>{var E=Ir();Oa(E,21,()=>Ze().ancestors,H=>H.id,(H,fe)=>{ta(H,{get item(){return f(fe)}})}),y(E),me(3,E,()=>ve),T(j,E)};B(Le,j=>{n()&&Ze()&&j(Dt)})}var Ue=R(Le,2),_t=b(Ue),gt=b(_t);{var Pt=j=>{var E=Cr(),H=b(E);Zn(H,()=>({"--margin":"0"})),ta(H.lastChild,{get item(){return Y()}}),y(H),y(E),me(3,E,()=>ve),T(j,E)},zt=j=>{var E=Ar(),H=b(E);const fe=A(()=>Ve()||!1),Ut=A(()=>!f(K));ir(H,{get pending(){return f(fe)},get disabled(){return f(Ut)},onclick:()=>ze()(),children:(wt,xt)=>{var Fe=Zr(),kt=R(b(Fe),2),Ke=b(kt),Ga=R(b(Ke));{var Xa=ie=>{var We=Ee("s");T(ie,We)};B(Ga,ie=>{(s()||n())&&ie(Xa)})}It(),y(Ke);var ua=R(Ke,2),Ka=b(ua);{var Qa=ie=>{var We=Ee();X(()=>xe(We,f(F))),T(ie,We)},$a=ie=>{var We=Ee("invalid url");T(ie,We)};B(Ka,ie=>{f(F)?ie(Qa):ie($a,!1)})}y(ua),y(kt),y(Fe),T(wt,Fe)},$$slots:{default:!0}}),y(E),me(3,E,()=>ve),T(j,E)};B(gt,j=>{Y()?j(Pt):j(zt,!1)})}y(_t),y(Ue);var Vt=R(Ue,2);{var q=j=>{Fa(j,{get item(){return Y()},get items(){return Pe()}})};B(Vt,j=>{Y()&&Pe()&&j(q)})}y(Ae);var W=R(Ae,2);{var ue=j=>{var E=Or(),H=b(E);y(E),X(()=>$(H,"href",Y().url)),me(3,E,()=>ve),T(j,E)};B(W,j=>{Y()&&j(ue)})}var yt=R(W,2),Be=b(yt),ca=b(Be),bt=b(ca);bt.__click=[Sr,c];let da;Za(bt,"",{},{"margin-right":"var(--space_sm)"});var la=R(bt,2),Lt=b(la);Lt.__click=p;var Ha=R(Lt);{var Ya=j=>{var E=Er(),H=b(E);y(E),X(fe=>xe(H,`loaded in ${fe??""}ms`),[()=>Math.round(vt())]),me(3,E,()=>ve),T(j,E)};B(Ha,j=>{vt()!==void 0&&j(Ya)})}y(la),y(ca),y(Be),An(Be,(j,E)=>Gt==null?void 0:Gt(j,E),()=>({onintersect:({intersecting:j})=>{j&&v()&&ze()()},count:1}));var qa=R(Be,2);{var Ja=j=>{var E=Nr(),H=b(E),fe=b(H),Ut=b(fe);Tr(Ut,{get url(){return t()},set url(Ke){t(Ke)}}),y(fe);var wt=R(fe,2),xt=b(wt),Fe=b(xt);Aa(Fe),It(),y(xt),y(wt),y(H);var kt=R(H,2);te(kt,()=>e.settings??Ta),y(E),X(()=>$(xt,"title",v()?"replies will load automatically when scrolled intersect":"replies are not loaded until you request them")),En(Fe,v),me(3,E,()=>ve),T(j,E)};B(qa,j=>{c()&&j(Ja)})}y(yt),y(re),X((j,E)=>{pt=Xt(re,1,"toot svelte-esn2at",null,pt,j),da=Xt(bt,1,"deselectable",null,da,E),Lt.disabled=!f(P)},[()=>({replies:Pe()}),()=>({selected:c()})]),me(3,re,()=>ve),T(ee,re)},$$slots:{default:!0}})}),T(a,Z),be({reset:p})}Ia(["click"]);var Mr=V('<header><h1 class="mt_xl5 mb_lg"> </h1> <p class="mb_xl5"><!></p></header>');function Dr(a,e){ye(e,!0);var t=Mr(),n=b(t),s=b(n,!0);y(n);var r=R(n,2),i=b(r);kn(i,{get item(){return e.item}}),y(r),y(t),X(()=>xe(s,e.item.title)),T(a,t),be()}const Pr=a=>{var e=zr();T(a,e)};var zr=V("<hr>"),Vr=V("<!>  <section><h2>Comments</h2> <!></section> <!>",1),Lr=V("<article><!> <!> <!> <!></article>"),Ur=V("<div>cannot find post <code> </code></div>"),Br=V('<div class="blog_post width_md"><!></div>');function Fr(a,e){ye(e,!0);const t=U(e,"separator",3,Pr),s=In.get().items.find(l=>l.slug===e.post.slug),r=Nn.maybe_get();var i=Br();_n(l=>{X(()=>pn.title=e.post.title)});var o=b(i);{var c=l=>{var v=Lr();let g;var p=b(v);Dr(p,{item:s});var N=R(p,2);te(N,()=>e.children);var I=R(N,2);te(I,()=>e.footer??Ta);var C=R(I,2);{var F=K=>{var P=Vr(),Z=_e(P);te(Z,t);var M=R(Z,2),D=R(b(M),2);{var le=z=>{const Y=A(()=>r==null?void 0:r.data);Rr(z,{get url(){return s.comments.url},include_replies:!0,initial_autoload:!0,reply_filter:Ze=>({type:"favourited_by",favourited_by:[Ze.account.acct]}),get settings_storage_key(){return`${s.id??""}_comments_settings`},get cache(){return f(Y)}})};B(D,z=>{(!r||r.data!==void 0)&&z(le)})}y(M);var ee=R(M,2);te(ee,t),T(K,P)};B(C,K=>{s.comments&&K(F)})}y(v),X(()=>g=Oe(v,g,{...e.attrs})),T(l,v)},d=l=>{var v=Ur(),g=R(b(v)),p=b(g,!0);y(g),y(v),X(()=>xe(p,e.post.slug)),T(l,v)};B(o,l=>{s?l(c):l(d,!1)})}y(i),T(a,i),be()}const Wr={title:"Modeling virtual social spaces: in this house we post cat pics on Saturday",slug:"modeling-virtual-social-spaces-in-this-house-we-post-cat-pics-on-saturday",date_published:"2023-01-22T21:44:17.224Z",date_modified:"2023-01-28T17:20:51.259Z",summary:"Proposing a model for one of the central aspects of online communities: the virtual social space.",tags:["web","community","social media","design","technology","software"],comments:{url:"https://hci.social/@ryanatkn/109768104377997044",type:"mastodon"}};var Hr=V(`<section><h2>Introduction</h2> <p>As I work on social software, I've been thinking about virtual social spaces and how I don't
			know enough about them. This post outlines a simple model:</p> <ul><li><strong>virtual</strong>: existing not physically but through software</li> <li><strong>social</strong>: including multiple people</li> <li><strong>space</strong>: a context containing and governing our interactions</li></ul> <p>So a virtual social space is a software-mediated context of multiplayer interaction. We're all
			familiar with them – they include our messaging apps, social media feeds, forums etc. By
			modeling the virtual social space, we can more easily imagine reshaping them for our
			individual and collective benefit.</p></section> <section><h2>The example</h2> <p>In the software I work on, a hub is a grouping of any number of virtual social spaces. Simple!
			Except neither humans nor networks are simple, and it becomes a situation when they're
			combined. To help us along, we'll analyze virtual social spaces with a hypothetical usecase.
			Let's say I have a public web forum containing a specific space that has some very strict
			rules: participants are allowed to post only on Saturday, and posts must contain pictures of
			cats they know personally. We'll use this example to think concretely about the model.</p> <h2>The model</h2> <p>To construct our model, we define 5 powers or abilities provided to actors in the space. You
			can probably think of more, but these get us pretty far:</p> <ol><li><strong>control</strong></li> <li><strong>access</strong></li> <li><strong>interaction</strong></li> <li><strong>curation</strong></li> <li><strong>distribution</strong></li></ol> <h3>control</h3> <p><strong>Control</strong> is the manifestation of power over the space. When I first create my
			forum and the space containing the cat pictures, the software gives me control over
			everything. One example is the ability to name the space. Given the design goals of the space,
			I choose the common and descriptive name <a href="https://mastodon.social/tags/caturday">Caturday</a>. More abstractly, control is the
			center around which the space exists: I, as the creator and administrator of this tiny web
			forum, have carved a distinct boundary of control out of the infinite virtual void. The
			software doesn't necessarily have to grant all of that control to me, but it does in this
			case. In our model, the control power controls the other 4 powers. Naturally.</p> <h3>access</h3> <p>Now that I have control over my tiny world, I want others to join so we can enjoy it together. <strong>Access</strong> is the ability to enter the space. It's similar to the "read permission" of a document. For Caturday
			I exercise my control over the space to choose public access, meaning everyone is welcome, even
			those creepy surveillance drones disguised as well-meaning people, because I'm prioritizing open
			participation over privacy to get more cat pics and joy. Additionally, even though we have a Saturday-themed
			space, actors can <em>read</em> posts any time. Now that people can access it, our virtual space
			is social!</p> <h3>interaction</h3> <p>We have a publicly accessible social space, but nothing much is happening yet. <strong>Interaction</strong> describes the things people can do in the space. It's like the "write permission" of a document.
			To make Caturday live up to its name, I again exercise my control, this time defining the rules
			of interaction in the space:</p> <ul><li>actors can <em>post</em> only on Saturday</li> <li>each post must include exactly one image (photograph, painting, etc) of a cat or cats that
				the poster personally knows, with an optional short bit of text</li> <li>actors can <em>react</em> to each others' posts, on Saturday only, in one of three ways: an emoji,
				a BIG emoji, or a tiny bit of text (let's say max 24 characters)</li></ul> <h3>curation</h3> <p>Now that we've defined the rules of interaction, let's talk about the meta layer of activities
			around those interactions. When people visit the space with cat pictures, I want them to be
			able to choose how they see and use the content. People may choose to:</p> <ul><li>view all of the posts in a single feed with the most recent at the top</li> <li>view posts sorted by most all-time big emoji reactions, excluding the text reactions</li> <li>view posts grouped by cat, so we can see each cat change over time</li> <li>view only the posts they've reacted to, with the most recent listed first, so they can show
				their friend their favorites in person</li> <li>today is Saturday! view the flurry activity with random sorting, excluding posts they've
				already seen</li></ul> <p>And so on, deep into the kaleidoscope of human creativity.</p> <p>In our model, we define these meta-interactions of organizing and managing posts as <strong>curation</strong>. Depending on your point of view, good curation may be even more important than the core
			interactions of posting and reacting. If our goal is to maximize our collaborative agency,
			creativity, and utility (joy) within the constraints of the space, which it is in this case,
			we want users to be able to create those views themselves, and then easily share them with
			others. So, I exercise control over the space to grant participants various powers of
			curation.</p> <h3>distribution</h3> <p>We now have posts, reactions, and all sorts of ways to view them. The final power in our model
			is <strong>distribution</strong>, the ability to communicate the space's data beyond its
			boundaries. In our hypothetical, we explicitly support distribution in a few open-ended ways,
			so the joy of each post can spread wherever it's wanted:</p> <ul><li>social media share buttons (only to the good sites in our case)</li> <li>a lightweight way to embed a post on any website</li> <li>a data service that sends post data to anyone who asks for it (an API)</li></ul> <p>By intentionally designing how distribution works in the space, we unlock another dimension of
			creativity that reaches the wider world beyond our little web forum. Technically every reader
			already has the data, but explicit distribution powers enable an ecosystem more readily.</p> <h2>Conclusion</h2> <p>We started with the idea of control over a virtual social space, and then:</p> <ul><li>decided who gets access, public in this case (and mostly ungated, but that's another post)</li> <li>and what interactions are available to them</li> <li>and then how they're able to curate the data from those interactions, creating new metadata
				and interactions</li> <li>and then how we can support distribution of that data and metadata to the wider world</li></ul> <p>This model seems useful for exploring the rich territory available to us when designing our
			virtual social spaces.</p> <p>So when dog folks come along with their predictable request, we can say, ah yes, they want us
			to exercise our control over the space to change the rules of interaction, so every dog can
			have their day too.</p></section> <hr> <section><h2>Acknowledgements</h2> <p>Special thanks to <a href="https://sipa.fiu.edu/people/faculty/modern-languages/rosario-medardo.html">Medardo Rosario</a> for help with revisions.</p> <p>One of my primary influences on this work is "Modular Politics: Toward a Governance Layer for
			Online Communities" (<a href="https://arxiv.org/abs/2005.13701">arxiv.org/abs/2005.13701</a>)
			by Nathan Schneider (<a href="https://nathanschneider.info/">nathanschneider.info</a>) and
			colleagues.</p> <p>My thinking on this subject is rooted in the perspective of consent for all involved actors,
			informed by the paper "Yes: Affirmative Consent as a Theoretical Framework for Understanding
			and Imagining Social Platforms" (<a href="https://consentful.systems">consentful.systems</a>)
			by Jane Im (<a href="https://imjane.net/">imjane.net</a>) and colleagues.</p> <p>I used ChatGPT (<a href="https://chatgpt.com/">chatgpt.com</a>) not for writing any text but
			to brainstorm the model when I was midway through. It didn't give me the final answers but it
			accelerated the final output, and we can't run the counterfactual of what I would have ended
			on without it.</p></section> <hr> <section><h2>P.S.</h2> <p>Some questions from this:</p> <ul><li>We've defined some hard-to-enforce rules of interaction, like personally knowing the cat.
				How could authentic participation be incentivized/enforced?</li> <li>What mechanisms can we use to collectively exert control over each of the other powers in
				the model? What could it look like to have public control over the space?</li> <li>How does gating fit into this model? What are the ways we can gate public and private
				access? And the other powers?</li></ul></section>`,1);function oi(a){Fr(a,{post:Wr,children:(e,t)=>{var n=Hr();It(10),T(e,n)},$$slots:{default:!0}})}export{oi as component};
